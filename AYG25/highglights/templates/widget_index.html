<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Highlights Widget - Developer Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #E30613;
        }
        h2 {
            margin-top: 30px;
            color: #333;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .example {
            border: 2px solid #E30613;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .widget-preview {
            width: 100%;
            max-width: 1920px;
            height: 600px;
            border: 2px solid #ccc;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Highlights Widget - Developer Guide</h1>
    
    <p>This widget allows developers to easily embed highlights from a Google Sheet into their web pages. The widget is constrained to a 1920x1080 container and displays sports highlights in a carousel format.</p>
    
    <h2>Required Google Sheet Columns</h2>
    <p>Your Google Sheet must contain the following columns (case-sensitive):</p>
    <ul>
        <li><strong>SPORT</strong> - Name of the sport</li>
        <li><strong>EVENT</strong> - Event name</li>
        <li><strong>EVENT GENDER</strong> - Gender category (Boys, Girls, Mixed)</li>
        <li><strong>STAGE / ROUND OF COMPETITION</strong> - Round/Stage information</li>
        <li><strong>NAME OF ATHLETE (SGP)</strong> - Singapore athlete name</li>
        <li><strong>COUNTRY NAME (SGP)</strong> - Country (usually "SGP")</li>
        <li><strong>TIMING (SGP)\nhh:mm:ss.ms</strong> - Timing for non-H2H sports</li>
        <li><strong>SCORE/DISTANCE/HEIGHT\n(SGP)</strong> - Score/distance/height for SGP athlete</li>
        <li><strong>NAME OF ATHLETE (COMPETITOR)</strong> - Opponent name (for H2H sports)</li>
        <li><strong>COUNTRY NAME (COMPETITOR)</strong> - Opponent country (for H2H sports)</li>
        <li><strong>SCORE (COMPETITOR)</strong> - Opponent score (for H2H sports)</li>
        <li><strong>MEDALS</strong> - "Gold", "Silver", or "Bronze" (optional)</li>
        <li><strong>PB/NR</strong> - Personal Best or National Record indicator (optional)</li>
        <li><strong>DATE (SGP)</strong> - Date in YYYY-MM-DD format</li>
    </ul>
    
    <h2>Method 1: Simple HTML (Data Attributes)</h2>
    <p>The easiest way to embed the widget:</p>
    <div class="example">
        <pre><code>&lt;!-- Include the embed script --&gt;
&lt;script src="http://your-server.com/embed.js"&gt;&lt;/script&gt;

&lt;!-- Create a container element with data attributes --&gt;
&lt;div id="highlights-widget"
     data-spreadsheet-id="YOUR_SPREADSHEET_ID"
     data-sheet-name="YOUR_SHEET_NAME"
     data-credentials-file="path/to/credentials.json"  &lt;!-- Optional --&gt;
     data-date="2025-10-27"  &lt;!-- Optional: filter by date --&gt;
     data-sport="Swimming"  &lt;!-- Optional: filter by sport --&gt;
     data-base-url="http://your-server.com"&gt;  &lt;!-- Optional: server URL --&gt;
&lt;/div&gt;</code></pre>
    </div>
    
    <h2>Method 2: JavaScript API</h2>
    <p>For more control, use the JavaScript API:</p>
    <div class="example">
        <pre><code>&lt;!-- Include the embed script --&gt;
&lt;script src="http://your-server.com/embed.js"&gt;&lt;/script&gt;

&lt;!-- Create a container element --&gt;
&lt;div id="highlights-widget"&gt;&lt;/div&gt;

&lt;!-- Initialize the widget --&gt;
&lt;script&gt;
    HighlightsWidget.create({
        containerId: 'highlights-widget',
        spreadsheet_id: 'YOUR_SPREADSHEET_ID',
        sheet_name: 'YOUR_SHEET_NAME',
        credentials_file: 'path/to/credentials.json',  // Optional
        date: '2025-10-27',  // Optional: filter by date
        sport: 'Swimming',  // Optional: filter by sport
        baseUrl: 'http://your-server.com'  // Optional: server URL
    });
&lt;/script&gt;</code></pre>
    </div>
    
    <h2>Method 3: Direct iframe</h2>
    <p>Embed directly using an iframe:</p>
    <div class="example">
        <pre><code>&lt;iframe 
    src="http://your-server.com/widget?spreadsheet_id=YOUR_SPREADSHEET_ID&amp;sheet_name=YOUR_SHEET_NAME&amp;date=2025-10-27"
    width="1920"
    height="1080"
    style="border: none; max-width: 100%; aspect-ratio: 1920/1080; height: auto;"
    frameborder="0"
    scrolling="no"&gt;
&lt;/iframe&gt;</code></pre>
    </div>
    
    <h2>API Endpoint</h2>
    <p>You can also fetch highlights data directly via the API:</p>
    <div class="example">
        <pre><code>GET /api/highlights?spreadsheet_id=YOUR_SPREADSHEET_ID&amp;sheet_name=YOUR_SHEET_NAME&amp;date=2025-10-27

Response:
{
    "highlights": [...],
    "h2h_groups": [...],
    "non_h2h_groups": [...],
    "total": 31,
    "h2h_count": 15,
    "non_h2h_count": 16
}</code></pre>
    </div>
    
    <h2>Parameters</h2>
    <table border="1" cellpadding="10" style="border-collapse: collapse; width: 100%;">
        <tr>
            <th>Parameter</th>
            <th>Required</th>
            <th>Description</th>
        </tr>
        <tr>
            <td><code>spreadsheet_id</code></td>
            <td>Yes</td>
            <td>Google Sheets spreadsheet ID (found in the URL)</td>
        </tr>
        <tr>
            <td><code>sheet_name</code></td>
            <td>Yes</td>
            <td>Name of the worksheet/tab in the spreadsheet</td>
        </tr>
        <tr>
            <td><code>credentials_file</code></td>
            <td>No</td>
            <td>Path to Google service account credentials JSON file (or use GOOGLE_CREDENTIALS_JSON env var)</td>
        </tr>
        <tr>
            <td><code>date</code></td>
            <td>No</td>
            <td>Filter highlights by specific date (YYYY-MM-DD format)</td>
        </tr>
        <tr>
            <td><code>sport</code></td>
            <td>No</td>
            <td>Filter highlights by specific sport name</td>
        </tr>
    </table>
    
    <h2>Widget Features</h2>
    <ul>
        <li>Fixed 1920x1080 container (responsive, maintains aspect ratio)</li>
        <li>Carousel navigation for multiple results</li>
        <li>Automatic detection of H2H vs non-H2H sports</li>
        <li>Medal icons (Gold ðŸ¥‡, Silver ðŸ¥ˆ, Bronze ðŸ¥‰)</li>
        <li>PB/NR badges</li>
        <li>Red header with "RESULTS" text</li>
        <li>Red-bordered sections</li>
        <li>Light pink result cards (#FDE9E9)</li>
    </ul>
    
    <h2>Example</h2>
    <div id="highlights-widget"
         data-spreadsheet-id="1xzFo8qBtGGSqW9V9UyaPVGqT6w5UIypw9hIgV3JZmto"
         data-sheet-name="AYG2025 Competition Schedule"
         data-date="2025-10-27"
         data-base-url="http://localhost:5000">
    </div>
    <script src="/embed.js"></script>
</body>
</html>

